/** Testes do Www.Feedback
 *
 * @autor : Mauro Ribeiro
 * @since : 2012-10
 *
 * @description : Kit de testes do controller Feedback do serviço WWW
 */

var should = require("should"),
    api = require("./utils.js").api,
    rand = require("./utils.js").rand;

describe('POST /feedback', function () {
    it('envia feedback', function (done) {
        api.post('www', '/feedback', {
            user : 'iddobrother',
            email : 'email.do@cara.com.br',
            message : 'Oie, tudo bem \n\ncomo vai você?\n abraçõsmano \n\n\ntchau!',
            events : [
                {user : 'iddobrother', date : new Date(), singupDate : new Date(2012, 0, 1), app : 'nome do app', label : 'nome da ação 1' },
                {user : 'iddobrother', date : new Date(), singupDate : new Date(2012, 0, 1), app : 'nome do app', label : 'nome da ação 2' },
                {user : 'iddobrother', date : new Date(), singupDate : new Date(2012, 0, 1), app : 'nome do app', label : 'nome da ação 3' },
                {user : 'iddobrother', date : new Date(), singupDate : new Date(2012, 0, 1), app : 'nome do app', label : 'nome da ação 4' },
                {user : 'iddobrother', date : new Date(), singupDate : new Date(2012, 0, 1), app : 'nome do app', label : 'nome da ação 5' },
                {user : 'iddobrother', date : new Date(), singupDate : new Date(2012, 0, 1), app : 'nome do app', label : 'nome da ação 6' },
                {user : 'iddobrother', date : new Date(), singupDate : new Date(2012, 0, 1), app : 'nome do app', label : 'nome da ação 7' },
                {user : 'iddobrother', date : new Date(), singupDate : new Date(2012, 0, 1), app : 'nome do app', label : 'nome da ação 8' },
                {user : 'iddobrother', date : new Date(), singupDate : new Date(2012, 0, 1), app : 'nome do app', label : 'nome da ação 9' },
                {user : 'iddobrother', date : new Date(), singupDate : new Date(2012, 0, 1), app : 'nome do app', label : 'nome da ação 10' }
            ],
            html : '<div id="body" class=""><header><div id="header"><nav><div id="ee-logo"><h1><a href="#">Empreendemia</a></h1><a href="#"><div class="image logo"></div></a></div><menu id="top-menu"><li class="dropdown selected"><a href="#">Minhas ferramentas<div class="image arrow"></div></a><menu id="top-menu-tools"><li><a href="#!/contacts">CONTACTS</a></li><li><a href="#!/tarefas">Organizador de Tarefas</a></li></menu></li><li><a href="#">+ Mais aplicativos</a></li><li><a href="#">Ajuda</a></li></menu><div id="user-section"><a class="hover-dropdown" href="#"><span class="welcome">Olá<span class="user-name">Mauro</span><span class="image arrow"></span></span></a><div id="user-menu"><menu><li><a href="#">Meu perfil</a></li><li><a href="#">Minha conta</a></li><li><a href="#">Sair</a></li></menu></div></div></nav></div></header><section><div id="main"><div id="tool"><header><div id="tool-header"><h2 id="tool-name">Organizador de Tarefas</h2></div></header><nav><div id="tool-menu"><menu id="tool-menu-navigation"><li class="selected"><a><span class="image icon-40px list"></span><span class="legend">tarefas</span></a><div class="image arrow"><div class="fill"></div></div></li><li><a><span class="image icon-40px checklist"></span><span class="legend">tarefas feitas</span></a><div class="image arrow"><div class="fill"></div></div></li></menu><menu id="tool-menu-actions"><li><a><span class="image icon-40px add"></span><span class="legend">adicionar tarefa</span></a></li></menu><menu id="tool-menu-settings"></menu></div></nav><section><div id="tool-content"><div id="tool-content-column-filter"><div id="tool-filter"><nav><form id="filter" onsubmit="return false;" autocomplete="false"><div><fieldset><legend>Categorias</legend><dl><dt><label></label></dt><dd><input id="form-5076056a17c3b21c4f00002c" type="checkbox" name="5076056a17c3b21c4f00002c"><label for="form-5076056a17c3b21c4f00002c">Geral</label><div class="error-message hide"></div></dd><dd><input id="form-5076056a17c3b21c4f00002b" type="checkbox" name="5076056a17c3b21c4f00002b"><label for="form-5076056a17c3b21c4f00002b">Reuniões</label><div class="error-message hide"></div></dd><dd><input id="form-5076056a17c3b21c4f00002a" type="checkbox" name="5076056a17c3b21c4f00002a"><label for="form-5076056a17c3b21c4f00002a">Finanças</label><div class="error-message hide"></div></dd><dd><input id="form-5076056a17c3b21c4f000029" type="checkbox" name="5076056a17c3b21c4f000029"><label for="form-5076056a17c3b21c4f000029">Vendas</label><div class="error-message hide"></div></dd><dd><input id="form-5076056a17c3b21c4f000028" type="checkbox" name="5076056a17c3b21c4f000028"><label for="form-5076056a17c3b21c4f000028">Projetos</label><div class="error-message hide"></div></dd><dd class="action"><a href="#">desmarcar todas</a></dd><dd class="action"><a href="#">marcar todas</a></dd></dl></fieldset><fieldset><legend>Importância</legend><dl><dt><label></label></dt><dd><input id="form-importantTodas" type="radio" value="all" name="important"><label for="form-importantTodas">Todas</label><div class="error-message hide"></div></dd><dd><input id="form-importantImportantes" type="radio" value="important" name="important"><label for="form-importantImportantes">Importantes</label><div class="error-message hide"></div></dd></dl></fieldset></div><div class="submit"><input type="submit" value="Filtrar"></div></form></nav><div class="loading hide"></div></div></div><div id="tool-content-column-list"><div id="tool-list"><nav><ol class="groups"><li class="group"><div class="header"><h3 class="name">pendente</h3><div class="count"></div></div><div class="menu"><menu></menu></div><ol class="items"></ol></li><li class="group"><div class="header"><h3 class="name">hoje</h3><div class="count"></div></div><div class="menu"><menu><li><a href="#"><span class="image icon-20px add"></span></a></li></menu></div><ol class="items"><li class="item"><section><div class="label color-blue">Geral</div><h4 class="title"><a>Avaliar protótipo financeiro</a></h4><ul class="icons"><li class="icon"><div class="image icon-12px date"></div><span legend="#">quinta, 18/out/2012</span></li></ul><p class="description hide"></p><div class="menu"><menu><li><a href="#"><span class="image icon-20px check"></span></a></li><li><a href="#"><span class="image icon-20px pencil"></span></a></li><li><a href="#"><span class="image icon-20px move"></span></a></li><li><a href="#"><span class="image icon-20px trash"></span></a></li></menu></div><div class="image arrow"><div class="fill"></div></div></section></li></ol></li><li class="group"><div class="header"><h3 class="name">essa semana</h3><div class="count"></div></div><div class="menu"><menu></menu></div><ol class="groups"><li class="group"><div class="header"><h3 class="name">sexta</h3><div class="count"></div></div><div class="menu"><menu><li><a href="#"><span class="image icon-20px add"></span></a></li></menu></div><ol class="items"><li class="item"><section><div class="label color-cyan">Projetos</div><h4 class="title"><a>eekit com id visual</a></h4><ul class="icons"><li class="icon"><div class="image icon-12px date"></div><span legend="#">sexta, 19/out/2012</span></li></ul><p class="description hide"></p><div class="menu"><menu><li><a href="#"><span class="image icon-20px check"></span></a></li><li><a href="#"><span class="image icon-20px pencil"></span></a></li><li><a href="#"><span class="image icon-20px move"></span></a></li><li><a href="#"><span class="image icon-20px trash"></span></a></li></menu></div><div class="image arrow"><div class="fill"></div></div></section></li></ol></li><li class="group"><div class="header"><h3 class="name">sabado</h3><div class="count"></div></div><div class="menu"><menu><li><a href="#"><span class="image icon-20px add"></span></a></li></menu></div><ol class="items"></ol></li></ol></li><li class="group"><div class="header"><h3 class="name">próxima semana</h3><div class="count"></div></div><div class="menu"><menu></menu></div><ol class="items"></ol></li><li class="group"><div class="header"><h3 class="name">depois</h3><div class="count"></div></div><div class="menu"><menu></menu></div><ol class="items"><li class="item"><section><div class="label color-blue">Geral</div><h4 class="title"><a>Capa ebook de produtividade</a></h4><ul class="icons"><li class="icon"><div class="image icon-12px date"></div><span legend="#">sexta, 26/out/2012</span></li><li class="icon"><div class="image icon-12px alert"></div><span legend="#">importante</span></li></ul><p class="description hide"></p><div class="menu"><menu><li><a href="#"><span class="image icon-20px check"></span></a></li><li><a href="#"><span class="image icon-20px pencil"></span></a></li><li><a href="#"><span class="image icon-20px move"></span></a></li><li><a href="#"><span class="image icon-20px trash"></span></a></li></menu></div><div class="image arrow"><div class="fill"></div></div></section></li><li class="item"><section><div class="label color-blue">Geral</div><h4 class="title"><a>Pesquisar/modelar ferramenta de acompanhamento</a></h4><ul class="icons"><li class="icon"><div class="image icon-12px date"></div><span legend="#">sexta, 26/out/2012</span></li></ul><p class="description hide"></p><div class="menu"><menu><li><a href="#"><span class="image icon-20px check"></span></a></li><li><a href="#"><span class="image icon-20px pencil"></span></a></li><li><a href="#"><span class="image icon-20px move"></span></a></li><li><a href="#"><span class="image icon-20px trash"></span></a></li></menu></div><div class="image arrow"><div class="fill"></div></div></section></li><li class="item"><section><div class="label color-cyan">Projetos</div><h4 class="title"><a>Telas NET</a></h4><ul class="icons"><li class="icon"><div class="image icon-12px date"></div><span legend="#">sexta, 26/out/2012</span></li></ul><p class="description hide"></p><div class="menu"><menu><li><a href="#"><span class="image icon-20px check"></span></a></li><li><a href="#"><span class="image icon-20px pencil"></span></a></li><li><a href="#"><span class="image icon-20px move"></span></a></li><li><a href="#"><span class="image icon-20px trash"></span></a></li></menu></div><div class="image arrow"><div class="fill"></div></div></section></li><li class="item"><section><div class="label color-cyan">Projetos</div><h4 class="title"><a>Telas Boa Vista</a></h4><ul class="icons"><li class="icon"><div class="image icon-12px date"></div><span legend="#">sexta, 26/out/2012</span></li></ul><p class="description hide"></p><div class="menu"><menu><li><a href="#"><span class="image icon-20px check"></span></a></li><li><a href="#"><span class="image icon-20px pencil"></span></a></li><li><a href="#"><span class="image icon-20px move"></span></a></li><li><a href="#"><span class="image icon-20px trash"></span></a></li></menu></div><div class="image arrow"><div class="fill"></div></div></section></li><li class="item"><section><div class="label color-blue">Geral</div><h4 class="title"><a>Telas DELL</a></h4><ul class="icons"><li class="icon"><div class="image icon-12px date"></div><span legend="#">sexta, 26/out/2012</span></li></ul><p class="description hide"></p><div class="menu"><menu><li><a href="#"><span class="image icon-20px check"></span></a></li><li><a href="#"><span class="image icon-20px pencil"></span></a></li><li><a href="#"><span class="image icon-20px move"></span></a></li><li><a href="#"><span class="image icon-20px trash"></span></a></li></menu></div><div class="image arrow"><div class="fill"></div></div></section></li><li class="item"><section><div class="label color-blue">Geral</div><h4 class="title"><a>Picas EE2</a></h4><ul class="icons"><li class="icon"><div class="image icon-12px date"></div><span legend="#">sexta, 26/out/2012</span></li></ul><p class="description hide"></p><div class="menu"><menu><li><a href="#"><span class="image icon-20px check"></span></a></li><li><a href="#"><span class="image icon-20px pencil"></span></a></li><li><a href="#"><span class="image icon-20px move"></span></a></li><li><a href="#"><span class="image icon-20px trash"></span></a></li></menu></div><div class="image arrow"><div class="fill"></div></div></section></li><li class="item"><section><div class="label color-blue">Geral</div><h4 class="title"><a>Consertar wp-admin do blog.ee</a></h4><ul class="icons"><li class="icon"><div class="image icon-12px date"></div><span legend="#">sexta, 26/out/2012</span></li></ul><p class="description hide"></p><div class="menu"><menu><li><a href="#"><span class="image icon-20px check"></span></a></li><li><a href="#"><span class="image icon-20px pencil"></span></a></li><li><a href="#"><span class="image icon-20px move"></span></a></li><li><a href="#"><span class="image icon-20px trash"></span></a></li></menu></div><div class="image arrow"><div class="fill"></div></div></section></li><li class="item"><section><div class="label color-blue">Geral</div><h4 class="title"><a>Planejamento EeDevs</a></h4><ul class="icons"><li class="icon"><div class="image icon-12px date"></div><span legend="#">sexta, 26/out/2012</span></li></ul><p class="description hide"></p><div class="menu"><menu><li><a href="#"><span class="image icon-20px check"></span></a></li><li><a href="#"><span class="image icon-20px pencil"></span></a></li><li><a href="#"><span class="image icon-20px move"></span></a></li><li><a href="#"><span class="image icon-20px trash"></span></a></li></menu></div><div class="image arrow"><div class="fill"></div></div></section></li></ol></li><li class="group"><div class="header"><h3 class="name">sem prazo</h3><div class="count"></div></div><div class="menu"><menu></menu></div><ol class="items"></ol></li></ol></nav><div class="loading hide"></div></div></div><div id="tool-content-column-frame"><div id="tool-frame" class="hide"><section><div id="tool-frame-view"><header><div id="tool-frame-view-header"><div id="tool-frame-view-header-thumbnail" class="hide"></div><h3 id="tool-frame-view-header-title" class="hide"></h3><h4 id="tool-frame-view-header-subtitle" class="hide"></h4><div class="break"></div></div></header><nav><menu id="tool-frame-view-tabs"></menu><div class="break"></div></nav><section><div id="tool-frame-view-content"></div></section></div></section><div class="loading hide"></div></div></div></div></section></div></div></section><footer><div id="footer"> </div></footer></div><div id="modal-wrapper" class="hide"><div id="modal-background"></div><div id="modal-centralizer"><div id="modal" class="width-400"><div id="modal-header"><h1 id="modal-title">Logar no EmpreendeKit</h1></div><div id="modal-close"><div class="image"></div><div class="legend">fechar</div></div><div id="modal-flash" class="error">Erro com login ou senha</div><div id="modal-description" class="hide"></div><div id="modal-form"><form onsubmit="return false;" autocomplete="false"><div><fieldset><legend>login</legend><dl><dt><label for="form-login">Email</label></dt><dd><input id="form-login" type="text" name="login"><div class="error-message hide"></div></dd></dl><dl><dt><label for="form-password">Senha</label></dt><dd><input id="form-password" type="password" name="password"><div class="error-message hide"></div></dd></dl></fieldset></div><div class="submit"><input type="submit" value="logar"></div></form></div><div id="modal-footer" class="hide"></div></div></div></div>'
        }, function (error, data, response) {
            if (error) done(error);
            else {
                response.should.have.status(200);
                should.not.exist(data);
                if (data) data.should.not.have.property('error');
                done();
            }
        });
    });
});
